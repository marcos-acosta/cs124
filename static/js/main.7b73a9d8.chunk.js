(this["webpackJsonptodo-app"]=this["webpackJsonptodo-app"]||[]).push([[0],{123:function(e,t,n){},124:function(e,t,n){},126:function(e,t,n){},127:function(e,t,n){},128:function(e,t,n){},129:function(e,t,n){},130:function(e,t,n){},131:function(e,t,n){},132:function(e,t,n){},133:function(e,t,n){},134:function(e,t,n){},135:function(e,t,n){},136:function(e,t,n){},137:function(e,t,n){},246:function(e,t,n){},247:function(e,t,n){},248:function(e,t,n){},249:function(e,t,n){},250:function(e,t,n){},251:function(e,t,n){},252:function(e,t,n){"use strict";n.r(t);var a=n(4),i=n.n(a),s=n(110),c=n.n(s),r=n(32),o=n(16),d=n(41),l=n(20),u=n(6),j=n(24),b=n(46),m=n(61),h=(n(123),n(124),n(7)),O=[1,2,3],p=["low","medium","high"];function x(e){var t=e.taskInEditModeId===e.id;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"toDoLowerHalf"}),Object(h.jsxs)("div",{className:"toDoItemOptions",children:[Object(h.jsx)("button",{className:"editButton toDoItemActionButton ".concat(t?"grayText":""),onClick:e.onClickEditButton,"aria-label":"edit task name: ".concat(e.taskName),children:"edit"}),Object(h.jsx)("button",{className:"deleteButton toDoItemActionButton ".concat(t?"grayText":""),onClick:function(){return e.handleDeletion()},"aria-label":"delete task: ".concat(e.taskName),children:"delete"}),Object(h.jsx)("div",{}),O.map((function(t,n){return function(t,n){return Object(h.jsx)("button",{className:"priorityButton ".concat(e.priority===t?"whiteText selectedPriority":""),onClick:function(){return e.handleChangePriority(t)},"aria-label":"".concat(e.priority===t?"deselect":"select"," priority level for task ").concat(e.taskName," to ").concat(p[t-1]),children:"!".repeat(t)},n)}(t,n)}))]})]})}n(126);function v(e){return Object(h.jsx)("div",{className:"toDoCheckbox",children:Object(h.jsx)("input",{type:"checkbox",id:"label-".concat(e.id),checked:e.checked,onChange:e.handleCompletion,"aria-label":"".concat(e.checked?"uncomplete":"complete",' task "').concat(e.taskName,'"')})})}var f=n(116);function g(e){var t=e.value,n=e.onChange,i=e.returnRef,s=e.longText,c=Object(f.a)(e,["value","onChange","returnRef","longText"]),r=Object(a.useState)(t.length),d=Object(o.a)(r,2),l=d[0],u=d[1],b=Object(a.useRef)(null);Object(a.useEffect)((function(){var e=b.current;e&&e.setSelectionRange(l,l),i(b)}),[i,b,l,t]);var m=function(e){u(e.target.selectionStart),n&&n(e)};return s?Object(h.jsx)("textarea",Object(j.a)({ref:b,value:t,onChange:m},c)):Object(h.jsx)("input",Object(j.a)({ref:b,value:t,onChange:m},c))}n(127);function k(e){return Object(h.jsx)("div",{className:"toDoLabel",children:e.taskInEditModeId!==e.id?Object(h.jsx)("label",{id:"label-".concat(e.id),className:e.isCompleted||e.shouldFadeOut?"strikethrough":"",children:e.expandedTaskId===e.id?e.taskName:(t=e.taskName,t.length>80?t.slice(0,80)+"\u2026":t)}):Object(h.jsx)(g,{longText:!0,value:e.taskName,onChange:function(t){return e.setTaskProperty(e.id,"taskName",function(e){for(;-1!==e.indexOf("\n");)e=e.replace("\n","");return e}(t.target.value))},onKeyUp:function(t){"Enter"===t.key&&(t.preventDefault(),e.setTaskInEditModeId(null))},returnRef:function(t){return e.returnRef(t)},onBlur:e.deselectOnEditMode,"aria-label":"edit task name"})});var t}n(128);function N(e){var t=e.expandedId===e.id;return Object(h.jsx)("button",{className:"toDoOptions",onClick:function(){return e.expandTaskCallback(e.id)},"aria-label":"".concat(t?"hide":"show"," task options"),children:Object(h.jsx)("div",{className:"toDoDropdown ".concat(t?e.color?"color_".concat(e.color,"_bg"):"selected":""),children:Object(h.jsx)("div",{className:"optionsArrow ".concat(t?"rotated":""),children:"\u2794"})})})}n(129);var I=["low","medium","high"];function C(e){var t,n=Object(a.useState)(!1),i=Object(o.a)(n,2),s=i[0],c=i[1],r=Object(a.useRef)(null);function d(){c(!0),setTimeout((function(){return e.deleteTask(e.id)}),500)}return Object(a.useEffect)((function(){r.current&&e.taskInEditModeId===e.id&&r.current.focus()}),[e.taskInEditModeId,e.id]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"priorityMarker supportsInvisibility ".concat(s?"invisible":""),children:(t=e.priority,Object(h.jsx)("div",{className:"priorityExclamationDiv priority".concat(t),"aria-label":'task "'.concat(e.taskName,'" has ').concat(0===t?"no":I[t-1]," priority")}))}),Object(h.jsxs)("div",{className:"toDoItem supportsInvisibility ".concat(s?"invisible":""," ").concat(e.expandedTaskId===e.id?"highlighted":""),children:[Object(h.jsx)(v,{id:e.id,checked:e.isCompleted,handleCompletion:function(t){c(!0);var n=t.target.checked;setTimeout((function(){return e.setTaskProperty(e.id,"isCompleted",n)}),500)},taskName:e.taskName}),Object(h.jsx)(k,Object(j.a)(Object(j.a)({},e),{},{textInput:r,deselectOnEditMode:function(){e.setTaskInEditModeId(null),e.taskName||d()},shouldFadeOut:s,returnRef:function(e){r=e}})),!e.isCompleted&&Object(h.jsx)(N,{id:e.id,expandedId:e.expandedTaskId,expandTaskCallback:e.expandTaskCallback,color:e.color}),e.expandedTaskId===e.id&&Object(h.jsx)(x,{priority:e.priority,taskName:e.taskName,id:e.id,taskInEditModeId:e.taskInEditModeId,handleChangePriority:function(t){e.priority===t?e.setTaskProperty(e.id,"priority",0):e.setTaskProperty(e.id,"priority",t)},onClickEditButton:function(){e.setTaskInEditModeId(e.id)},handleDeletion:d})]})]})}n(130);function T(e){return Object(h.jsx)("div",{className:"taskListDiv",children:e.tasks.map((function(t){return Object(a.createElement)(C,Object(j.a)(Object(j.a)({},t),{},{key:t.id,expandedTaskId:e.expandedTaskId,expandTaskCallback:e.toggleExpandedTaskId,setTaskProperty:e.setTaskProperty,deleteTask:e.deleteTask,setTaskInEditModeId:e.setTaskInEditModeId,taskInEditModeId:e.taskInEditModeId,color:e.color}))}))})}n(131);function y(e){var t=Object(a.useState)(!1),n=Object(o.a)(t,2),i=n[0],s=n[1];return Object(h.jsxs)("div",{className:"completedSectionContainer ".concat(i?"invisible":""),children:[Object(h.jsx)("div",{className:"completedItemsHeader",children:Object(h.jsxs)("h3",{children:["completed",Object(h.jsx)("button",{className:"clearCompleted",onClick:function(){s(!0),setTimeout((function(){return e.deleteCompleted()}),500)},"aria-label":"delete completed tasks. tasks to be completed: ".concat(e.tasks.map((function(e){return e.taskName})).join()),children:"clear"})]})}),Object(h.jsx)(T,{tasks:e.tasks,setTaskProperty:e.setTaskProperty,deleteTask:e.deleteTask})]})}n(132);function w(e){return Object(h.jsx)("button",{className:"addItem ".concat(e.isNarrow?"addItemNarrow":"addItemWide"," ").concat(e.color?"".concat(e.color):""),onClick:function(){return e.addTaskAndEdit()},disabled:e.inEditMode,"aria-label":e.longText,children:e.isNarrow?"+ ".concat(e.longText):"+"})}n(133);function L(e){return Object(h.jsx)("select",{onChange:function(t){return e.onChangeCallback(t.target.value)},className:"optionSelector",children:e.options.map((function(e,t){var n=Object(o.a)(e,2),a=n[0],i=n[1];return Object(h.jsx)("option",{value:a,children:i},t)}))})}n(134);function E(e){return Object(h.jsxs)("div",{className:"mainDiv",children:[Object(h.jsx)("h3",{children:"todo \ud83e\udd91"}),e.lists.map((function(t){return Object(h.jsx)("button",{onClick:function(){return e.setCurrentListId(t.id)},className:"listButton ".concat(e.currentListId===t.id?t.colorTheme?"color_".concat(t.colorTheme,"_bg"):"selected":""),"aria-label":"Switch to list: ".concat(t.listName),children:Object(h.jsx)("span",{className:e.currentListId===t.id?"bold":"",children:t.listName})},t.id)}))]})}n(135);function S(e){return Object(h.jsx)("div",{className:"infoText ".concat(e.error?"errorText":""),children:e.error?"an unexpected error occurred: ".concat(e.error):"loading..."})}n(136);function M(e){var t=Object(a.useState)(""),n=Object(o.a)(t,2),i=n[0],s=n[1],c=function(t){e.removeFromListField(e.currentListId,"sharedWith",t),e.removeFromListField(e.currentListId,"admins",t)},r=function(t,n){"admin"===n?e.addToListField(e.currentListId,"admins",t):"basic"===n&&e.removeFromListField(e.currentListId,"admins",t)};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"smokeScreen"}),Object(h.jsxs)("div",{className:"sharingPanelContainer",children:[Object(h.jsx)("button",{onClick:e.onClosePanel,className:"exitButton",children:"\xd7"}),Object(h.jsxs)("div",{className:"sharingPanelBody",children:[Object(h.jsx)("div",{className:"sharingPanelHeader",children:"sharing"}),Object(h.jsxs)("div",{className:"sharingContent",children:[e.admins.includes(e.user.email)&&Object(h.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},className:"shareRow",children:[Object(h.jsx)("input",{onChange:function(e){return s(e.target.value)},placeholder:"invite by email",value:i,className:"inviteInput"}),Object(h.jsx)("button",{onClick:function(){return e.addToListField(e.currentListId,"pendingInvitations",i),void s("")},className:"inviteButton color_".concat(e.colorTheme,"_bg"),children:"invite"})]}),Object(h.jsxs)("div",{className:"innerContainer",children:[Object(h.jsx)("div",{className:"subheader",children:"contributors"}),Object(h.jsxs)("div",{className:"permissionsTable",children:[!e.isNarrow&&Object(h.jsxs)("div",{className:"permissionsRow",children:[Object(h.jsx)("div",{children:Object(h.jsx)("u",{children:"email"})}),Object(h.jsx)("div",{children:Object(h.jsx)("u",{children:"permissions"})})]}),e.sharedEmails.map((function(t,n){return e.isNarrow?Object(h.jsxs)("div",{className:"narrowContributorContainer",children:[Object(h.jsx)("div",{className:"emailContainer",children:t}),Object(h.jsx)("div",{className:"permissionActions",children:e.owner!==t&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"roleSelectorContainer withMargin",children:Object(h.jsxs)("select",{onChange:function(e){return r(t,e.target.value)},className:"roleSelector",value:e.admins.includes(t)?"admin":"basic",disabled:!e.admins.includes(e.user.email),children:[Object(h.jsx)("option",{children:"basic"}),Object(h.jsx)("option",{children:"admin"})]})}),e.admins.includes(e.user.email)&&Object(h.jsx)("div",{className:"removePersonContainer withMargin",children:Object(h.jsx)("button",{onClick:function(){return c(t)},className:"removePerson",children:"remove"})})]})})]}):Object(h.jsxs)("div",{className:"permissionsRow",children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"emailBubble",children:t})," ",e.owner===t&&Object(h.jsx)("span",{className:"ownerText",children:"(owner)"})]}),e.owner!==t&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"roleSelectorContainer",children:Object(h.jsxs)("select",{onChange:function(e){return r(t,e.target.value)},className:"roleSelector",value:e.admins.includes(t)?"admin":"basic",disabled:!e.admins.includes(e.user.email),children:[Object(h.jsx)("option",{children:"basic"}),Object(h.jsx)("option",{children:"admin"})]})}),e.admins.includes(e.user.email)&&Object(h.jsx)("div",{className:"removePersonContainer",children:Object(h.jsx)("button",{onClick:function(){return c(t)},className:"removePerson",children:"remove"})})]})]},n)}))]})]}),Object(h.jsx)("div",{className:"innerContainer",children:e.pendingInvitations.length>0&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"subheader",children:"pending invites"}),e.pendingInvitations.map((function(t,n){return Object(h.jsx)("div",{className:"pendingEmailContainer",children:Object(h.jsxs)("div",{className:"emailBubble",children:[t,Object(h.jsx)("button",{className:"deletePending",onClick:function(){return e.removeFromListField(e.currentListId,"pendingInvitations",t)},children:"\xd7"})]})},n)}))]})})]})]})]})]})}n(137);function F(e){var t=Object(a.useState)(!1),n=Object(o.a)(t,2),i=n[0],s=n[1],c=Object(a.useState)(!1),r=Object(o.a)(c,2),d=r[0],l=r[1];return Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"accountIconDiv",onClick:function(){return s(!i)},children:[Object(h.jsxs)("div",{className:"accountIcon",children:[Object(h.jsx)("div",{className:"accountLetter",children:"\ud83e\udd91"}),!e.user.emailVerified&&Object(h.jsx)("div",{className:"notification",children:"_"})]}),Object(h.jsx)("div",{className:"expandCaretDiv ".concat(i?"flipped":""),children:"\u2335"})]}),i&&Object(h.jsxs)("div",{className:"accountPanel",children:[Object(h.jsx)("div",{className:"userEmail",children:e.user.email}),!e.user.emailVerified&&Object(h.jsx)("div",{children:Object(h.jsx)("button",{onClick:function(){return e.user.sendEmailVerification(),void l(!0)},className:"accountButton validateButton",children:d?"resend verification email":"send verification email"})}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{onClick:function(){return e.auth.signOut()},className:"accountButton signOutButton",children:"sign out"})})]})]})}var P=[["oldestTop","oldest"],["newestTop","newest"],["taskName","name"],["priority","priority"]];function B(e){var t=Object(a.useState)(null),n=Object(o.a)(t,2),i=n[0],s=n[1],c=Object(a.useState)(!1),r=Object(o.a)(c,2),d=r[0],l=r[1],u=e.lists.find((function(t){return t.id===e.currentListId}));function j(){var t=e.addTask();e.setTaskInEditModeId(t),s(t)}return Object(h.jsxs)("div",{children:[d&&Object(h.jsx)(M,{onClosePanel:function(){return l(!1)},addToListField:e.addToListField,currentListId:e.currentListId,sharedEmails:u.sharedWith,admins:u.admins,removeFromListField:e.removeFromListField,owner:u.owner,pendingInvitations:u.pendingInvitations,user:e.user,colorTheme:u.colorTheme,isNarrow:e.isNarrow}),Object(h.jsxs)("div",{className:"titleHeaderRow",children:[Object(h.jsx)("button",{onClick:function(){return e.setCurrentListId(null)},className:"backButton","aria-label":"back to list menu",children:"\u2190 back"}),Object(h.jsx)("div",{className:"titleHeader",children:Object(h.jsx)("h2",{className:u?"color_".concat(u.colorTheme,"_ul"):"",children:u.listName})}),Object(h.jsx)("div",{className:"authPanelContainerTaskView",children:Object(h.jsx)(F,{auth:e.auth,user:e.user})})]}),Object(h.jsxs)("div",{className:"pageContent",children:[Object(h.jsxs)("div",{className:"noTopMargin",children:[Object(h.jsx)("div",{className:"sortByText",children:"sort by:"}),Object(h.jsx)(L,{options:P,onChangeCallback:e.setOrderingBy}),Object(h.jsx)("button",{className:"sharingButton",onClick:function(){return l(!0)},children:"share"})]}),e.loading?Object(h.jsx)(S,{}):e.error?Object(h.jsx)(S,{error:e.error}):Object(h.jsxs)(h.Fragment,{children:[0===e.data.filter((function(e){return!e.isCompleted})).length&&Object(h.jsx)("button",{className:"noTasksPlaceholder",onClick:j,children:"add a task!"}),Object(h.jsx)(T,{tasks:e.data.filter((function(e){return!e.isCompleted})),setTaskProperty:e.setTaskProperty,deleteTask:e.deleteTask,taskInEditModeId:e.taskInEditModeId,setTaskInEditModeId:e.setTaskInEditModeId,toggleExpandedTaskId:function(e){s(i===e?null:e)},expandedTaskId:i,color:u.colorTheme}),0===e.data.filter((function(e){return e.isCompleted})).length?"":Object(h.jsx)(y,{deleteCompleted:e.deleteCompleted,tasks:e.data.filter((function(e){return e.isCompleted})),setTaskProperty:e.setTaskProperty,deleteTask:e.deleteTask})]})]}),Object(h.jsx)(w,{inEditMode:!(null===e.taskInEditModeId&&!e.loading),addTaskAndEdit:j,isNarrow:e.isNarrow,longText:"add task",color:"color_".concat(u.colorTheme,"_bg")})]})}var D=function(e){return e.isDesktopWide?Object(h.jsxs)("div",{className:"pageColumnsDiv",children:[Object(h.jsx)("div",{className:"listSelector",children:Object(h.jsx)(E,{lists:e.lists,setCurrentListId:e.setCurrentListId,currentListId:e.currentListId})}),Object(h.jsx)("div",{children:Object(h.jsx)(B,Object(j.a)({},e))})]}):Object(h.jsx)(B,Object(j.a)({},e))},R=n(47);function A(e){var t=Object(a.useState)(null),n=Object(o.a)(t,2),i=n[0],s=n[1],c=Object(a.useState)(null),d=Object(o.a)(c,2),l=d[0],O=d[1],p=Object(a.useState)("created"),x=Object(o.a)(p,2),v=x[0],f=x[1],g=e.db.collection(e.collectionName).doc(e.currentListId).collection("tasks"),k=Object(b.a)(g),N=Object(o.a)(k,3),I=N[0],C=N[1],T=N[2],y=Object(R.useMediaQuery)({maxWidth:500}),w=Object(R.useMediaQuery)({minWidth:800});T&&e.setCurrentListId(null);var L={priority:function(e,t){return E(t).priority-E(e).priority},taskName:function(e,t){return E(e).taskName.toLowerCase()<E(t).taskName.toLowerCase()?-1:1},newestTop:function(e,t){return E(e).created<E(t).created?1:-1},oldestTop:function(e,t){return E(e).created<E(t).created?-1:1}};Object(a.useEffect)((function(){C||T||s(l?I.docs.map((function(e){return e.data()})).find((function(e){return e.id===l})):null)}),[l,C,T,I&&I.docs.length]);var E=function(e){return i&&e.id===i.id?i:e},S=function(e){g.doc(e).delete()};return!T&&Object(h.jsx)(D,Object(j.a)(Object(j.a)({},e),{},{setTaskProperty:function(e,t,n){g.doc(e).update(Object(u.a)({},t,n))},deleteTask:S,deleteCompleted:function(){return I.docs.map((function(e){return e.data()})).filter((function(e){return e.isCompleted})).forEach((function(e){return S(e.id)}))},setOrderingBy:f,addTask:function(){var e=Object(m.a)();return g.doc(e).set({taskName:"",isCompleted:!1,id:e,created:r.a.database.ServerValue.TIMESTAMP,priority:0}),e},data:C?null:I.docs.map((function(e){return e.data()})).sort(L[v]),loading:C,error:T,taskInEditModeId:l,setTaskInEditModeId:O,isNarrow:y,isDesktopWide:w,lists:e.lists,addToListField:e.addToListField}))}var _=n(115),W=(n(246),{"#2274a5":"blue","#dc493a":"red","#662c91":"purple","#4a442d":"olive","#70ae6e":"green"}),G=Object.fromEntries(Object.entries(W).map((function(e){var t=Object(o.a)(e,2),n=t[0];return[t[1],n]})));function H(e){var t=Object(a.useRef)(null),n=Object(a.useState)(!1),i=Object(o.a)(n,2),s=i[0],c=i[1],r=Object(a.useState)(!1),d=Object(o.a)(r,2),l=d[0],u=d[1],j=e.isPendingList?"spanOne":e.sharedWith.includes(e.user.email)?e.owner===e.user.email?"spanOne":"canSpanTwo":"canSpanThree";Object(a.useEffect)((function(){t.current&&e.listInEditModeId===e.id&&t.current.focus()}),[e.listInEditModeId,e.id]);var b=function(){e.setListInEditModeId(null),e.listName||m()},m=function(){c(!0),setTimeout((function(){return e.deleteList(e.id)}),500)};return Object(h.jsxs)("div",{className:"listCard supportsInvisibility ".concat(s?"invisible":""," ").concat(e.isPendingList?"notClickable":""," ").concat(e.owner!==e.user.email?"extraRow":""),children:[Object(h.jsxs)("div",{className:"listCardLeftPanel",children:[Object(h.jsx)("button",{onClick:function(){return u(!l)},className:"colorDropdown ".concat("default"!==e.colorTheme?"color_".concat(e.colorTheme,"_bg"):""),disabled:!e.admins.includes(e.user.email),children:Object(h.jsx)("div",{className:"dropDownArrow ".concat(l?"flipped":""," ").concat(e.admins.includes(e.user.email)?"":"transparentText"),"aria-label":"Select color theme for list: ".concat(e.listName),children:"\u2335"})}),l&&Object(h.jsx)("div",{className:"colorPickerDiv",children:Object(h.jsx)(_.a,{color:G[e.colorTheme],onChangeComplete:function(t){e.setListProperty(e.id,"colorTheme",W[t.hex.toLowerCase()]),u(!1)},colors:Object.keys(W),className:"float",triangle:"hide"})})]}),e.listInEditModeId===e.id?Object(h.jsx)(g,{value:e.listName,onChange:function(t){return e.setListProperty(e.id,"listName",t.target.value)},onKeyUp:function(e){"Enter"===e.key&&b()},onBlur:function(){return b()},returnRef:function(e){t=e},className:"listNameInput ".concat(j),"aria-label":"edit list name"}):Object(h.jsx)("div",{className:"listName ".concat(j),onClick:function(){return!e.isPendingList&&e.setCurrentListId(e.id)},children:e.listName}),e.isPendingList?Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{className:"acceptRejectSpanner",children:[Object(h.jsx)("button",{className:"acceptRejectButton acceptButton",onClick:function(){return e.onAcceptCallback()},children:"accept"}),Object(h.jsx)("button",{className:"acceptRejectButton rejectButton",onClick:function(){return e.onRejectCallback()},children:"reject"})]})}):Object(h.jsxs)(h.Fragment,{children:[e.owner===e.user.email?Object(h.jsx)("button",{onClick:function(){return m()},className:"listActionButton linkButton deleteButton","aria-label":"delete list: ".concat(e.listName),children:"delete"}):Object(h.jsx)("div",{}),e.admins.includes(e.user.email)?Object(h.jsx)("button",{onClick:function(){return e.setListInEditModeId(e.id)},className:"listActionButton linkButton editButton","aria-label":"edit list name: ".concat(e.listName),children:"edit"}):Object(h.jsx)("div",{}),e.sharedWith.includes(e.user.email)?Object(h.jsx)("button",{onClick:function(){return e.setCurrentListId(e.id)},className:"listActionButton openButton","aria-label":"view tasks in list: ".concat(e.listName),children:"\u2794"}):Object(h.jsx)("div",{})]}),e.owner!==e.user.email&&Object(h.jsx)("div",{className:"ownerDisambiguator",children:e.owner})]})}n(247);function V(e){var t=Object(a.useState)(null),n=Object(o.a)(t,2),i=n[0],s=n[1],c=Object(R.useMediaQuery)({maxWidth:500}),r=function(){s(e.addList())},d=function(t){e.removeFromListField(t,"pendingInvitations",e.user.email)};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"headerRow",children:[Object(h.jsx)("div",{className:"todoHeader",children:Object(h.jsx)("h4",{children:Object(h.jsx)("span",{className:"todo",children:"todo"})})}),Object(h.jsx)("div",{className:"authPanelContainer",children:Object(h.jsx)(F,{auth:e.auth,user:e.user})})]}),Object(h.jsx)("div",{className:"listContainer",children:e.loading?Object(h.jsx)(S,{}):e.error?Object(h.jsx)(S,{error:e.error}):Object(h.jsxs)(h.Fragment,{children:[0===e.lists.length&&Object(h.jsx)("button",{className:"noListsPlaceholder",onClick:r,children:"create a task list!"}),e.lists.map((function(t){return Object(a.createElement)(H,Object(j.a)(Object(j.a)(Object(j.a)({},e),t),{},{key:t.id,listInEditModeId:i,setListInEditModeId:s}))}))]})}),0!==e.pendingLists.length&&(e.user.emailVerified?Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{className:"listContainer",children:[Object(h.jsx)("div",{className:"sectionHeader",children:"pending invitations"}),Object(h.jsx)(h.Fragment,{children:e.pendingLists.map((function(t){return Object(a.createElement)(H,Object(j.a)(Object(j.a)(Object(j.a)({},e),t),{},{key:t.id,listInEditModeId:i,setListInEditModeId:s,isPendingList:!0,onAcceptCallback:function(){return n=t.id,e.addToListField(n,"sharedWith",e.user.email),void d(n);var n},onRejectCallback:function(){return d(t.id)}}))}))})]})}):Object(h.jsx)("div",{className:"verifyToSeeContainer",children:Object(h.jsxs)("div",{className:"verifyToSeeDiv",children:[Object(h.jsx)("b",{children:"you have pending invites to join a collaborative list!"}),Object(h.jsx)("hr",{}),"verify your email (in the account panel) to see them."]})})),Object(h.jsx)(w,{isNarrow:c,addTaskAndEdit:r,inEditMode:i,longText:"add list"})]})}n(248);var q="lists-lab5";function K(e){var t=e.db.collection(q),n=t.where("sharedWith","array-contains",e.user.email),i=t.where("pendingInvitations","array-contains",e.user.email),s=Object(b.a)(n),c=Object(o.a)(s,3),d=c[0],j=c[1],O=c[2],p=Object(b.a)(i),x=Object(o.a)(p,3),v=x[0],f=x[1],g=x[2],k=Object(a.useState)(null),N=Object(o.a)(k,2),I=N[0],C=N[1],T=function(e,n,a){var i=t.doc(e);i.get().then((function(e){return!e.data()[n].find((function(e){return a===e}))&&i.update(Object(u.a)({},n,[].concat(Object(l.a)(e.data()[n]),[a])))}))},y=function(e,n,a){var i=t.doc(e);i.get().then((function(e){return i.update(Object(u.a)({},n,e.data()[n].filter((function(e){return e!==a}))))}))};return I?Object(h.jsx)(A,{currentListId:I,lists:!j&&!O&&d.docs.map((function(e){return e.data()})),db:e.db,collectionName:q,setCurrentListId:C,addToListField:T,removeFromListField:y,user:e.user,auth:e.auth}):Object(h.jsx)(V,{lists:j||O?[]:d.docs.map((function(e){return e.data()})),pendingLists:f||g?[]:v.docs.map((function(e){return e.data()})),setCurrentListId:C,deleteList:function(e){t.doc(e).delete()},addList:function(){var n=Object(m.a)();return t.doc(n).set({listName:"",id:n,created:r.a.database.ServerValue.TIMESTAMP,colorTheme:"blue",owner:e.user.email,admins:[e.user.email],sharedWith:[e.user.email],pendingInvitations:[]}),n},setListProperty:function(e,n,a){t.doc(e).update(Object(u.a)({},n,a))},loading:j,error:O,user:e.user,auth:e.auth,addToListField:T,removeFromListField:y})}n(249);var Q=new r.a.auth.GoogleAuthProvider;function U(e){var t=Object(a.useState)(""),n=Object(o.a)(t,2),i=n[0],s=n[1],c=Object(a.useState)(""),r=Object(o.a)(c,2),l=r[0],u=r[1],j=Object(d.c)(e.auth),b=[j[0],j[2],j[3]],m=b[0],O=b[1],p=b[2];return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"authTitle",children:"log in"}),Object(h.jsx)("hr",{}),Object(h.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},children:[Object(h.jsx)("input",{value:i,onChange:function(e){return s(e.target.value)},placeholder:"email",type:"email",className:"signInInput"}),Object(h.jsx)("input",{value:l,onChange:function(e){return u(e.target.value)},placeholder:"password",type:"password",className:"signInInput"}),Object(h.jsx)("button",{type:"submit",onClick:function(){return m(i,l)},className:"submitButton",children:"sign in"})]}),!O&&p&&Object(h.jsx)("div",{className:"errorDiv",children:"auth/invalid-email"===p.code?"please provide a valid email address":"auth/internal-error"===p.code?"please re-check your username and password":"auth/user-not-found"===p.code?"that user wasn't found; did you sign up?":"auth/wrong-password"===p.code?"incorrect email or password":"some error occurred; please try again"}),Object(h.jsx)("hr",{}),Object(h.jsx)("div",{className:"centerContainer",children:Object(h.jsxs)("button",{onClick:function(){return e.auth.signInWithPopup(Q)},className:"useGoogleButton",children:[Object(h.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/53/Google_%22G%22_Logo.svg/800px-Google_%22G%22_Logo.svg.png",className:"googleLogo",alt:"google logo"}),"sign in with google"]})})]})}function z(e){var t=Object(a.useState)(""),n=Object(o.a)(t,2),i=n[0],s=n[1],c=Object(a.useState)(""),r=Object(o.a)(c,2),l=r[0],u=r[1],j=Object(a.useState)(""),b=Object(o.a)(j,2),m=b[0],O=b[1],p=Object(a.useState)(!1),x=Object(o.a)(p,2),v=x[0],f=x[1],g=Object(d.b)(e.auth),k=[g[0],g[2],g[3]],N=k[0],I=k[1],C=k[2];return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"authTitle",children:"sign up"}),Object(h.jsx)("hr",{}),Object(h.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},children:[Object(h.jsx)("input",{value:i,onChange:function(e){return s(e.target.value)},placeholder:"email",type:"email",className:"signInInput"}),Object(h.jsx)("input",{value:l,onChange:function(e){return u(e.target.value)},placeholder:"password",type:"password",className:"signInInput"}),Object(h.jsx)("input",{value:m,onChange:function(e){return O(e.target.value)},placeholder:"retype password",type:"password",className:"signInInput"}),Object(h.jsx)("button",{className:"submitButton",type:"submit",onClick:function(){l!==m?f(!0):(f(!1),N(i,l))},children:"sign up"})]}),!I&&(C||v)&&Object(h.jsx)("div",{className:"errorDiv",children:v?"passwords do not match":"auth/invalid-email"===C.code?"please provide a valid email address":"auth/internal-error"===C.code?"please re-check your username and password":"auth/weak-password"===C.code?"passwords must be at least 6 characters long":"some error occurred; please try again"})]})}n(250);function J(e){var t=Object(a.useState)(!0),n=Object(o.a)(t,2),i=n[0],s=n[1];return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"header",children:Object(h.jsxs)("h4",{children:[Object(h.jsx)("span",{className:"todo",children:"todo"})," \ud83e\udd91"]})}),Object(h.jsxs)("div",{className:"centerContainer",children:[Object(h.jsx)("div",{className:"authenticationContainer",children:i?Object(h.jsx)(U,{auth:e.auth,showSignUp:function(){return s(!1)}}):Object(h.jsx)(z,{auth:e.auth,showLogIn:function(){return s(!0)}})}),Object(h.jsx)("div",{className:"signInSignUpSwitcher",onClick:function(){return s(!i)},children:i?Object(h.jsxs)(h.Fragment,{children:["don't have an account? ",Object(h.jsx)("u",{children:"sign up"})]}):Object(h.jsxs)(h.Fragment,{children:["already have an account? ",Object(h.jsx)("u",{children:"sign in"})]})})]})]})}n(251);function Z(e){var t=Object(d.a)(e.auth),n=Object(o.a)(t,3),a=n[0],i=n[1],s=n[2];return!(i||s)&&Object(h.jsx)("div",{className:"minWidthContainer",children:a?Object(h.jsx)(K,{db:e.db,auth:e.auth,user:a}):Object(h.jsx)(J,{auth:e.auth})})}r.a.initializeApp({apiKey:"AIzaSyAZ7Q00Z5zGKg2DOwM4qGRsPRgbRIsAoRw",authDomain:"todosquid-adb18.firebaseapp.com",projectId:"todosquid-adb18",storageBucket:"todosquid-adb18.appspot.com",messagingSenderId:"650094165810",appId:"1:650094165810:web:ed005ab5e0d9790ae4212b"});var X=r.a.firestore(),Y=r.a.auth();c.a.render(Object(h.jsx)(i.a.StrictMode,{children:Object(h.jsx)(Z,{db:X,auth:Y})}),document.getElementById("root"))}},[[252,1,2]]]);
//# sourceMappingURL=main.7b73a9d8.chunk.js.map